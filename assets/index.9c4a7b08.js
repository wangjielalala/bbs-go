import{_ as A,b as I,w as V,x as $,I as M,g as R}from"./index.ebe893a0.js";/* empty css              *//* empty css               */import{a as q,u as N,j as U,b as K}from"./index.db022209.js";/* empty css              */import{B as o,C as m,aJ as O,aI as E,F as s,aD as u,aG as a,aL as r,aE as g,aH as t,aM as p,u as i,bA as Q,bk as W,bB as X,bT as Y,bU as Z,aV as G,bC as ee,bD as H,ba as te,bb as ae,e as se,r as j,c as ne,o as oe,b4 as ie,b5 as le,bE as ce,bF as re,ab as de,b8 as ue,bG as me}from"./arco.bfc06e8a.js";/* empty css               *//* empty css               *//* empty css               */import"./chart.8d130ef7.js";import"./vue.203b0a99.js";const T=y=>(te("data-v-00c3d03d"),y=y(),ae(),y),_e={class:"topics"},pe={class:"topic-status"},he={class:"topic-header"},ge=["src"],ye={class:"topic-head-info"},fe={class:"nickname"},ve={class:"topic-metas"},ke={class:"meta-item"},be=T(()=>s("span",null,"ID:",-1)),we={class:"meta-item"},Se=T(()=>s("span",null,"\u65F6\u95F4:",-1)),ze={class:"meta-item"},Ce=T(()=>s("span",null,"\u67E5\u770B:",-1)),Ie={class:"meta-item"},Ve=T(()=>s("span",null,"\u70B9\u8D5E:",-1)),$e={class:"meta-item"},Oe=T(()=>s("span",null,"\u8BC4\u8BBA:",-1)),Ue={key:0,class:"topic-summary"},Te={key:1,class:"topic-summary"},De={class:"topic-image-list"},Fe={class:"topic-footer"},xe={class:"topic-tags"},Le={class:"topic-actions"},Pe={__name:"TopicList",props:{results:{type:Array,default(){return[]}}},emits:["change"],setup(y,{emit:x}){const f=x,c=async n=>{try{await I.form("/api/admin/topic/delete",U({id:n})),V("\u5220\u9664\u6210\u529F"),f("change")}catch(l){$(l)}},_=async n=>{try{await I.form("/api/admin/topic/undelete",U({id:n})),V("\u53D6\u6D88\u5220\u9664\u6210\u529F"),f("change")}catch(l){$(l)}},v=async n=>{try{await I.form("/api/admin/topic/recommend",U({id:n})),V("\u63A8\u8350\u6210\u529F"),f("change")}catch(l){$(l)}},h=async n=>{try{await I.delete(`/api/admin/topic/recommend?id=${n}`),V("\u53D6\u6D88\u63A8\u8350\u6210\u529F"),f("change")}catch(l){$(l)}},L=async n=>{try{await I.form("/api/admin/topic/audit",U({id:n})),V("\u5BA1\u6838\u6210\u529F"),f("change")}catch(l){$(l)}},D=n=>{};return(n,l)=>{const k=Q,b=M,z=W,F=X,P=Y,C=Z,w=G,S=ee,B=H;return o(),m("div",_e,[y.results&&y.results.length?(o(!0),m(O,{key:0},E(y.results,e=>(o(),m("div",{key:e.id,class:"topic-item"},[s("div",pe,[e.recommend?(o(),u(k,{key:0,color:"green"},{default:a(()=>[r("\u5DF2\u63A8\u8350")]),_:1})):g("",!0),e.status===1?(o(),u(k,{key:1,color:"red"},{default:a(()=>[r("\u5DF2\u5220\u9664")]),_:1})):g("",!0)]),s("div",he,[t(z,{size:40},{default:a(()=>[e.user.avatar?(o(),m("img",{key:0,src:e.user.avatar},null,8,ge)):(o(),u(b,{key:1}))]),_:2},1024),s("div",ye,[s("div",fe,p(e.user.nickname),1),s("div",ve,[s("div",ke,[be,s("span",null,p(e.id),1)]),s("div",we,[Se,s("span",null,p(("useFormatDate"in n?n.useFormatDate:i(q))(e.createTime)),1)]),s("div",ze,[Ce,s("span",null,p(e.viewCount),1)]),s("div",Ie,[Ve,s("span",null,p(e.likeCount),1)]),s("div",$e,[Oe,s("span",null,p(e.commentCount),1)])])])]),e.type===0&&e.summary?(o(),m("div",Ue,p(e.summary),1)):g("",!0),e.type===1&&e.content?(o(),m("div",Te,p(e.content),1)):g("",!0),e.imageList&&e.imageList.length?(o(),u(P,{key:2,infinite:""},{default:a(()=>[s("div",De,[(o(!0),m(O,null,E(e.imageList,(d,J)=>(o(),u(F,{key:J,width:"150",height:"150",class:"image-item","show-loader":"",src:d.url,fit:"cover"},null,8,["src"]))),128))])]),_:2},1024)):g("",!0),s("div",Fe,[s("div",xe,[e.node?(o(),u(k,{key:0,color:"green",size:"mini"},{default:a(()=>[r(p(e.node.name),1)]),_:2},1024)):g("",!0),e.tags&&e.tags.length?(o(!0),m(O,{key:1},E(e.tags,d=>(o(),u(k,{key:d.id,size:"mini"},{default:a(()=>[r("#\xA0"+p(d.name),1)]),_:2},1024))),128)):g("",!0)]),s("div",Le,[e.status===0?(o(),m(O,{key:0},[t(C,{class:"action-item",href:("useSiteUrl"in n?n.useSiteUrl:i(N))("/topic/"+e.id),target:"_blank"},{default:a(()=>[r("\u67E5\u770B\u8BE6\u60C5")]),_:2},1032,["href"]),t(C,{class:"action-item",onClick:d=>D(e.id)},{default:a(()=>[r(" \u67E5\u770B\u8BC4\u8BBA ")]),_:2},1032,["onClick"]),e.recommend?(o(),u(S,{key:0,content:"\u662F\u5426\u786E\u5B9A\u53D6\u6D88\u63A8\u8350\uFF1F",onOk:d=>h(e.id)},{default:a(()=>[t(w,{class:"action-item",size:"mini",type:"primary"},{default:a(()=>[r("\u53D6\u6D88\u63A8\u8350")]),_:1})]),_:2},1032,["onOk"])):!e.recommend&&e.status===0?(o(),u(S,{key:1,content:"\u662F\u5426\u786E\u5B9A\u63A8\u8350\uFF1F",onOk:d=>v(e.id)},{default:a(()=>[t(w,{class:"action-item",size:"mini",type:"primary"},{default:a(()=>[r("\u63A8\u8350")]),_:1})]),_:2},1032,["onOk"])):g("",!0),t(S,{content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onOk:d=>c(e.id)},{default:a(()=>[t(w,{class:"action-item",size:"mini",type:"primary"},{default:a(()=>[r("\u5220\u9664")]),_:1})]),_:2},1032,["onOk"])],64)):e.status===1?(o(),u(S,{key:1,content:"\u662F\u5426\u786E\u5B9A\u53D6\u6D88\u5220\u9664\uFF1F",onOk:d=>_(e.id)},{default:a(()=>[t(w,{class:"action-item",size:"mini",type:"primary"},{default:a(()=>[r("\u53D6\u6D88\u5220\u9664")]),_:1})]),_:2},1032,["onOk"])):e.status===2?(o(),m(O,{key:2},[t(C,{class:"action-item",href:("useSiteUrl"in n?n.useSiteUrl:i(N))("/topic/"+e.id),target:"_blank"},{default:a(()=>[r("\u67E5\u770B\u8BE6\u60C5")]),_:2},1032,["href"]),t(C,{class:"action-item",onClick:d=>D(e.id)},{default:a(()=>[r("\u67E5\u770B\u8BC4\u8BBA")]),_:2},1032,["onClick"]),t(S,{content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onOk:d=>c(e.id)},{default:a(()=>[t(w,{class:"action-item",size:"mini",type:"primary"},{default:a(()=>[r("\u5220\u9664")]),_:1})]),_:2},1032,["onOk"]),t(S,{content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onOk:d=>L(e.id)},{default:a(()=>[t(w,{class:"action-item",size:"mini",type:"primary"},{default:a(()=>[r("\u5BA1\u6838\u901A\u8FC7")]),_:1})]),_:2},1032,["onOk"])],64)):g("",!0)])])]))),128)):(o(),u(B,{key:1}))])}}},Be=A(Pe,[["__scopeId","data-v-00c3d03d"]]);const Ee={class:"container"},Ne={class:"container-header"},je={class:"container-main"},Ae={key:0,class:"topic-container"},Ge={class:"container-footer"},He={__name:"index",setup(y){const x=R(),f=se(!1),c=j({limit:20,page:1}),_=j({page:{page:1,limit:20,total:0},results:[]}),v=ne(()=>({total:_.page.total,current:_.page.page,pageSize:_.page.limit,showTotal:!0,showJumper:!0,showPageSize:!0}));oe(()=>{K()});const h=async()=>{f.value=!0;try{const n=await I.postForm("/api/admin/topic/list",U(c));_.page=n.page,_.results=n.results}finally{f.value=!1}};h();const L=n=>{c.page=n,h()},D=n=>{c.limit=n,h()};return(n,l)=>{const k=ie,b=le,z=ce,F=re,P=de,C=G,w=ue,S=H,B=me;return o(),m("div",Ee,[s("div",Ne,[t(w,{model:i(c),layout:"inline",size:i(x).table.size},{default:a(()=>[t(b,null,{default:a(()=>[t(k,{modelValue:i(c).id,"onUpdate:modelValue":l[0]||(l[0]=e=>i(c).id=e),placeholder:"ID"},null,8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(k,{modelValue:i(c).userId,"onUpdate:modelValue":l[1]||(l[1]=e=>i(c).userId=e),placeholder:"\u7528\u6237ID"},null,8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(F,{modelValue:i(c).status,"onUpdate:modelValue":l[2]||(l[2]=e=>i(c).status=e),placeholder:"\u72B6\u6001","allow-clear":"",onChange:h},{default:a(()=>[t(z,{value:0,label:"\u6B63\u5E38"}),t(z,{value:1,label:"\u5220\u9664"}),t(z,{value:2,label:"\u5F85\u5BA1\u6838"})]),_:1},8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(F,{modelValue:i(c).recommend,"onUpdate:modelValue":l[3]||(l[3]=e=>i(c).recommend=e),placeholder:"\u662F\u5426\u63A8\u8350","allow-clear":"",onChange:h},{default:a(()=>[t(z,{value:1,label:"\u63A8\u8350"}),t(z,{value:0,label:"\u672A\u63A8\u8350"})]),_:1},8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(k,{modelValue:i(c).title,"onUpdate:modelValue":l[4]||(l[4]=e=>i(c).title=e),placeholder:"\u6807\u9898"},null,8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(C,{type:"primary","html-type":"submit",onClick:h},{icon:a(()=>[t(P)]),default:a(()=>[r(" \u67E5\u8BE2 ")]),_:1})]),_:1})]),_:1},8,["model","size"])]),s("div",je,[i(_)&&i(_).results?(o(),m("div",Ae,[t(Be,{results:i(_).results,onChange:h},null,8,["results"])])):(o(),u(S,{key:1}))]),s("div",Ge,[t(B,{style:{margin:"10px"},total:i(v).total,current:i(v).current,"page-size":i(v).pageSize,"show-total":i(v).showTotal,"show-jumper":i(v).showJumper,"show-page-size":i(v).showPageSize,onChange:L,onPageSizeChange:D},null,8,["total","current","page-size","show-total","show-jumper","show-page-size"])])])}}},tt=A(He,[["__scopeId","data-v-0d4e88af"]]);export{tt as default};
